<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<style type="text/css">
	.wrap{
		width: 100%;
		height: 400px;
	}
	.input{
		float: left;
		width: 49%;
	}
	.output{
		float: left;
		width: 49%;
		height: 400px;
		border: 1px solid #000;
		margin-left: 1%;
		overflow: auto;
	}
	textarea{
		width: 100%;
		height: 400px;
		background: black;
		color: white;
		margin-right: 1%;
	}
	.extract{
		width: 200px;
		margin: 0 auto;
	}
	input{
		padding: 10px;
	}
</style>
<body>
<script type="text/javascript">
window.onload = function() {
	var $ = function( selector ) {
		return document.getElementById( selector );
	};

	$("button").onclick = function() {
		var val = $("mess").value.split('\n'),
			result = [],
			html = '',
			idx = 0;
		for( var i in val )
			val[i] = val[i].replace(/<[^>]+>/g,'')
					.replace(/\d+0{10,}/g,'')
					.replace(/&#160;/g,'')
					.replace(/\[[^\]]+\]/g,'');
		for( var i in val )
			if( val[i].length )
				result.push( val[i] );
		//console.log(result);
		for( var i in result ) {
			if( idx == 2 ) {
				html += result[i] + '</br>';
				idx = 0;
			} else {
				html += result[i] + ' ';
				idx += 1;
			}
		}
		$('result').innerHTML = html;
	};
};
</script>
<div class="wrap">
	<div class="input">
		<textarea id="mess" name="mess">
		</textarea>
	</div>
	<div class="output" id="result">
	</div>
	<div class="extract">
		<input id="button" type="button" value="Extract">
	</div>
</body>
</html>
